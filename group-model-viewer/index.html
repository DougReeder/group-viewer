<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Group Model Viewer</title>
    <meta name="description" content="view 3-D model as a group using Croquet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script src="https://unpkg.com/@croquet/croquet"></script>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.2/dist/aframe-extras.loaders.min.js"></script>
    <script src="../node_modules/aframe-croquet-component/public/lib/aframe-croquet-component.js"></script></head>
<!--    <script src="https://cdn.jsdelivr.net/gh/DougReeder/aframe-croquet-component@streamline/public/lib/aframe-croquet-component.js"></script></head>-->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.0/dist/aframe-extras.controls.min.js"></script>
    <script src="./selectable-model.js"></script>
    <script src="../src/group-viewer.js"></script>
<body>

<a-scene debug croquet="tps: 60; spawnPoint: 0 0 0;" inspector="url: https://cdn.jsdelivr.net/gh/c-frame/aframe-editor@1.7.0/dist/aframe-editor.min.js">
    <a-assets timeout="10000">
        <a-asset-item id="avatarModel" src="../assets/low_poly_head_with_hair_free_download.glb"></a-asset-item>
        <a-asset-item id="pointerModel" src="../assets/pointer_cone.glb"></a-asset-item>
        <img id="floorTexture" src="../assets/floor_tiles_08_diff_2k.jpg">
        <img id="floorNormalMap" src="../assets/floor_tiles_08_nor_gl_2k.jpg">
        <img id="floorAmbientOcclusionMap" src="../assets/floor_tiles_08_ao_2k.jpg">
        <img id="checkerboardEquirect" src="../assets/4269882900_b6dfc45dab_k.jpg">
    </a-assets>

    <a-entity id="presentation" selectable-model multiuser></a-entity>

    <a-group-viewer id="groupViewer" presentationId="presentation" pointerModelId="pointerModel" fly="false" tps="60" log="false"></a-group-viewer>

    <a-entity id="floor" geometry="primitive: plane; height: 100; width: 100;" rotation="-90 0 0"
              material="src: #floorTexture; repeat: 100 100; normalMap: #floorNormalMap; normalTextureRepeat: 100 100; ambientOcclusionMap: #floorAmbientOcclusionMap; ambientOcclusionTextureRepeat: 100 100; "></a-entity>
    <a-sky src="#checkerboardEquirect"></a-sky>
</a-scene>

<dialog style="position: absolute; top: 1em; right: 1em;">
    <p>message goes here</p>
    <form method="dialog">
        <button>OK</button>
    </form>
</dialog>

<template id="avatarTemplate">
    <a-entity>   <!-- This entity's location and rotation are set from the other user's camera -->
        <a-entity gltf-model="#avatarModel" scale="0.005 0.005 0.005" rotation="0 0 0" position="0 0 0"></a-entity>
    </a-entity>
</template>
</body>
</html>
